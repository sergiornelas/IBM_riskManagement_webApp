{% extends 'base.html' %}

{% block content %}

<section id="showcase-inner" class="py-5 text-white">
   <div class="container">
      <div class="row text-center">
         <div class="col-md-12">
            <h1 class="display-4">Exception requests</h1>
            <p class="lead">Manage your patches if you have struggles</p>
         </div>
      </div>
   </div>
</section>

<!-- Breadcrumb -->
<section id="bc" class="mt-3">
    <div class="container">
       <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
             <li class="breadcrumb-item">
                <a href="{% url 'dashboard' %}">
                   <i class="fas fa-home"></i> Dashboard </a>
             </li>
             <li class="breadcrumb-item">
                <a href="{% url 'exceptionsBoard' %}">
                   <i class="fas fa-calendar-check"></i> Requests </a>
             </li>
          </ol>
       </nav>
    </div>
 </section>

<section id="dashboard" class="py-4">
   <div class="container">
      {% include 'partials/_alerts.html' %}
      <div class="row">
         <div class="col-md-12">
            <h2>Welcome {{ user.username }}</h2>
            {% if client_exceptions %}
            <p>Here are your exceptions status</p>
            
            <table class="table table-striped table-bordered">
               <thead class="table-info ">
                  <tr>
                     <th scope="col">Exclude id</th>
                     <th scope="col">Title</th>
                     <th scope="col">Exclude date</th>
                     <th scope="col">Content</th>
                     <th scope="col">Status</th>
                  </tr>
               </thead>
               <tbody>
                  {% for p in client_exceptions %}
                  <tr>
                    <td>{{ p.id }}</td>
                    <td>{{ p.title }}</td>
                    <td>{{ p.exclude_date }}</td>
                    <td>{{ p.content }}</td>
                    {% if p.state == "Pending" %}
                        <td style="font-style: italic;"><b>{{ p.state }}</b></td>
                    {% else %}
                        <td>{{ p.state }}</td>
                    {% endif %}
                  </tr>
                  {% endfor %}
               </tbody>
            </table>
            {% else %}
            <p>You have not patches</p>
            {% endif %}
         </div>
      </div>
   </div>
</section>

{% endblock %}
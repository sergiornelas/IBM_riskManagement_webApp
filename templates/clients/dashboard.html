{% extends 'base.html' %}

{% block content %}

<section id="showcase-inner" class="py-5 text-white">
   <div class="container">
      <div class="row text-center">
         <div class="col-md-12">
            <h1 class="display-4">Patches dashboard</h1>
            <p class="lead">Manage your patches if you have struggles</p>
         </div>
      </div>
   </div>
</section>

<!-- Breadcrumb -->
<section id="bc" class="mt-3">
   <div class="container">
      <nav aria-label="breadcrumb">
         <ol class="breadcrumb">
            <li class="breadcrumb-item">
               <a href="{% url 'dashboard' %}">
                  <i class="fas fa-home"></i> Dashboard </a>
            </li>
            <li class="breadcrumb-item">
               <a href="{% url 'exceptionsBoard' %}">
                  <i class="fas fa-calendar-check"></i> Requests </a>
            </li>
         </ol>
      </nav>
   </div>
</section>

<section id="dashboard" class="py-4">
   <div class="container">
      {% include 'partials/_alerts.html' %}
      <div class="row">
         <div class="col-md-12">
            <h2>Welcome {{ user.username }}</h2>
            {% if client_has_server %}
            <p>Here are patches that are coming</p>

            <a href="{% url 'serverOrPatch' %}" class="btn btn-primary btn-block">Make an exception</a>

            <table class="table table-striped table-bordered">
               <thead class="table-info ">
                  <tr>
                     <th scope="col">patch id</th>
                     <th scope="col">Server Name</th>
                     <th scope="col">Advisory</th>
                     <!-- <th scope="col">Criticality</th> -->
                     <th scope="col">Scheduled Date</th>
                  </tr>
               </thead>
               <tbody>
                  {% for p in patches %}
                  <tr>
                     <td>{{ p.id }}</td>
                     <td>{{ p.server }}</td>
                     <td>{{ p.advisory }}</td>
                     <td>{{ p.scheduled_date }}</td>
                  </tr>
                  {% endfor %}
               </tbody>
            </table>
            {% else %}
            <p>You have not patches</p>
            {% endif %}
         </div>
      </div>
   </div>
</section>

<div style="max-width: 200px;" id="my-calendar"></div>

<section id="services" class="py-5 bg-secondary text-white">
   <div class="container">
      <div class="row text-center">
         <div class="col-md-12">
            <i class="fas fa-comment fa-4x mr-4"></i>
            <hr>
            <h2>Risk management tool</h2>
            <br>
            <h4>Request the exclusion for a certain period either due to a business need or interferences between
               applications.</h4>
         </div>
      </div>
   </div>
</section>

<script>
   var arrayFullServers = [];
   var arrayServerPatches = [];
   var arrayPatchesPatches = [];
   Array.prototype.remove = function () {
      var what, a = arguments, L = a.length, ax;
      while (L && this.length) {
         what = a[--L];
         while ((ax = this.indexOf(what)) !== -1) {
            this.splice(ax, 1);
         }
      }
      return this;
   };
</script>

{% endblock %}